(this.webpackJsonpvmech=this.webpackJsonpvmech||[]).push([[0],{12:function(e,t,n){e.exports=n(23)},17:function(e,t,n){},21:function(e,t,n){e.exports=n.p+"static/media/Grass_A.62e0b3b4.png"},22:function(e,t,n){e.exports=n.p+"static/media/Decor_B.9d6c3437.png"},23:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),u=n.n(c),s=n(2),i=n(3),o=n(6),h=n(5),l=n(7),d=(n(17),n(1)),f=n.n(d),v=n(4),m=function(){function e(){Object(s.a)(this,e),this.HOST="http://vm21/api/?"}return Object(i.a)(e,[{key:"send",value:function(){var e=Object(v.a)(f.a.mark((function e(t,n){var a,r,c,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in a=[],n)a.push("".concat(r,"=").concat(n[r]));return e.next=4,fetch("".concat(this.HOST,"method=").concat(t,"&").concat(a.join("&")));case 4:return c=e.sent,e.next=7,c.json();case 7:return u=e.sent,e.abrupt("return",!(!u||"ok"!==u.result)&&u.data);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"auth",value:function(){var e=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.send("login",t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"move",value:function(e,t){return this.send("move",{id:e,direction:t})}},{key:"checkEndGame",value:function(){return this.send("checkEndGame",{})}},{key:"shoot",value:function(e){return this.send("shoot",{id:e})}},{key:"updateScene",value:function(){return this.send("update",{})}}]),e}(),p=n(8),b=n.n(p),E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(o.a)(this,Object(h.a)(t).call(this))).authRequest=e.authRequest,n.setAuth=e.setAuth,n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"login",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t,n,a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("login").value,n=document.getElementById("password").value,!t||!n){e.next=12;break}return a=Math.round(1e5*Math.random()),r=b()(b()(t+n)+a),e.next=7,this.authRequest({login:t,hash:r,rnd:a});case 7:(c=e.sent)&&this.setAuth(!0),console.log(c),e.next=13;break;case 12:console.log("\u041d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445!");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"auth"},r.a.createElement("h1",null,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f!!!"),r.a.createElement("input",{type:"text",id:"login",placeholder:"\u041b\u043e\u0433\u0438\u043d"}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",id:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return e.login()}},"\u041d\u0430\u0436\u043c\u0438 \u043c\u0435\u043d\u044f"))}}]),t}(r.a.Component),g=function(){function e(t){Object(s.a)(this,e),(t=t instanceof Object?t:{}).id?this.canvas=document.getElementById(t.id):(this.canvas=document.createElement("canvas"),document.getElementsByClassName("game")[0].appendChild(this.canvas)),this.context=this.canvas.getContext("2d"),this.canvas.width=t.width||500,this.canvas.height=t.height||500}return Object(i.a)(e,[{key:"clear",value:function(){this.context.fillStyle="#eeeeee",this.context.fillRect(0,0,this.canvas.width,this.canvas.height)}},{key:"drawImage",value:function(e,t,n){this.context.drawImage(e,t,n)}},{key:"drawImageScale",value:function(e,t,n,a,r){this.context.drawImage(e,0,0,e.width,e.height,t,n,a,r)}},{key:"drawRect",value:function(){this.context.fillStyle="#ffffff",this.context.rect(10,10,100,100),this.context.fill()}}]),e}(),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(h.a)(t).call(this))).setAuth=e.setAuth,a.updateRequest=e.updateRequest,a.SPRITE={GRASS:new window.Image,DECOR:new window.Image},a.SPRITE.GRASS.src=n(21),a.SPRITE.DECOR.src=n(22),a}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.canvas=new g({id:"canvas"})}},{key:"renderScene",value:function(e){this.canvas.clear();for(var t=e.field,n=0;n<t.length;n++)for(var a=0;a<t[n].length;a++)0===t[a][n]&&this.canvas.drawImageScale(this.SPRITE.GRASS,50*n,50*a,50,50),t[a][n]>0&&this.canvas.drawImageScale(this.SPRITE.DECOR,50*n,50*a,50,50)}},{key:"logout",value:function(){this.setAuth(!1)}},{key:"update",value:function(){var e=Object(v.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateRequest();case 2:t=e.sent,this.renderScene(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"game"},r.a.createElement("h1",null,"\u0418\u0433\u0440\u0430!!!"),r.a.createElement("button",{onClick:function(){return e.update()}},"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443"),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){return e.logout()}},"\u0412\u044b\u0439\u0434\u0438 \u043e\u0442\u0441\u044e\u0434\u0430"),r.a.createElement("br",null),r.a.createElement("canvas",{id:"canvas"}))}}]),t}(r.a.Component),w=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(h.a)(t).call(this))).server=new m,e.state={isAuth:!1},e}return Object(l.a)(t,e),Object(i.a)(t,[{key:"setAuth",value:function(e){this.setState({isAuth:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"\u0412\u041c-\u043c\u0435\u0445\u0438!!!"),this.state.isAuth?r.a.createElement(k,{setAuth:function(t){return e.setAuth(t)},updateRequest:function(){return e.server.updateScene()}}):r.a.createElement(E,{setAuth:function(t){return e.setAuth(t)},authRequest:function(t){return e.server.auth(t)}}))}}]),t}(r.a.Component);u.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.e486dba7.chunk.js.map